server:
  port: 8083
  # Définit le port sur lequel ton application Spring Boot va écouter.
  # Ici, le service "payment-service" sera accessible sur http://localhost:8083

spring:
  application:
    name: payment-service
    # Nom de l'application Spring Boot, utile pour l’identification dans logs ou Actuator

  datasource:
    url: jdbc:h2:mem:paymentdb
    # URL de la base de données H2 en mémoire. "mem" signifie que la DB est temporaire
    username: sa
    password:
    driver-class-name: org.h2.Driver
    # Configuration standard pour H2 : driver, username et password (vide ici)

  jpa:
    hibernate:
      ddl-auto: create-drop
      # Hibernate va créer les tables au démarrage et les supprimer à l'arrêt
      # Utile pour tests ou développement, à ne pas utiliser en production
    show-sql: true
    # Affiche les requêtes SQL générées par Hibernate dans la console

  h2:
    console:
      enabled: true
      path: /h2-console
      # Active la console H2 accessible via http://localhost:8083/h2-console

# Configuration WebClient pour appeler un service de paiement externe
payment:
  api:
    url: https://api-paiement-simule.fake
    # URL de l'API de paiement simulée
    timeout: 5000
    # Timeout en millisecondes pour les appels HTTP
    retry:
      max-attempts: 3
      # Nombre de tentatives si l'appel échoue
      backoff-delay: 1000
      # Temps d'attente entre les tentatives en millisecondes

# Logging pour déboguer les appels WebClient
logging:
  level:
    org.springframework.web.reactive.function.client: DEBUG
    # Active le debug pour WebClient (Spring WebFlux)
    reactor.netty.http.client: DEBUG
    # Active le debug pour le client HTTP réactif de Netty (réseau)
